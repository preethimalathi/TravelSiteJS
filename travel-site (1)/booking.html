<!doctype html>
<html lang="en">
<head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Booking — Travelly</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="assets/css/styles.css">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm"><div class="container"><a class="navbar-brand logo" href="index.html">Travelly</a></div></nav>
<main class="container my-5">
  <h1>Book your trip</h1>
  <form id="booking-form" class="card p-4">
    <div id="step-1" class="mb-3">
      <h4>Step 1 — Details</h4>
      <div class="mb-2"><label class="form-label">Destination</label><input id="booking-destination" name="destination" class="form-control" required></div>
      <div class="row g-2">
        <div class="col"><label>Check-in</label><input name="start" type="date" class="form-control" required></div>
        <div class="col"><label>Check-out</label><input name="end" type="date" class="form-control" required></div>
      </div>
      <div class="mt-2"><label>Travelers</label><input name="travelers" type="number" min="1" value="2" class="form-control" required></div>
      <div class="mt-3"><button type="button" id="to-step-2" class="btn btn-primary">Next</button></div>
    </div>

    <div id="step-2" class="mb-3 d-none">
      <h4>Step 2 — Extras</h4>
      <div class="form-check"><input class="form-check-input" type="checkbox" id="extra-insurance"><label class="form-check-label" for="extra-insurance">Travel insurance</label></div>
      <div class="form-check"><input class="form-check-input" type="checkbox" id="extra-tourguide"><label class="form-check-label" for="extra-tourguide">Private guide</label></div>
      <div class="mt-3"><button type="button" id="back-1" class="btn btn-outline-secondary">Back</button> <button type="button" id="to-step-3" class="btn btn-primary">Review</button></div>
    </div>

    <div id="step-3" class="mb-3 d-none">
      <h4>Step 3 — Review & Confirm</h4>
      <div id="review-area" class="mb-3"></div>
      <button type="submit" class="btn btn-success">Confirm Booking</button>
    </div>
  </form>

  <div id="confirmation" class="mt-4 d-none card p-3">
    <h3>Booking Confirmed</h3>
    <p id="booking-ref"></p>
  </div>
</main>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" defer></script>
<script src="assets/js/main.js" defer></script>
<script>
document.addEventListener('DOMContentLoaded', ()=>{
  const to2 = document.getElementById('to-step-2'), to3 = document.getElementById('to-step-3');
  const back1 = document.getElementById('back-1');
  const s1 = document.getElementById('step-1'), s2 = document.getElementById('step-2'), s3 = document.getElementById('step-3');
  const form = document.getElementById('booking-form');
  const review = document.getElementById('review-area'), conf = document.getElementById('confirmation');

  to2.addEventListener('click', ()=>{
    const dest = document.getElementById('booking-destination').value.trim();
    if(!dest){ alert('Please enter destination'); return; }
    s1.classList.add('d-none'); s2.classList.remove('d-none');
  });
  back1.addEventListener('click', ()=>{ s2.classList.add('d-none'); s1.classList.remove('d-none'); });
  to3.addEventListener('click', ()=>{
    const dest = document.getElementById('booking-destination').value, start=form.start.value, end=form.end.value;
    review.innerHTML = `<p><strong>Destination:</strong> ${dest}</p><p><strong>Dates:</strong> ${start} → ${end}</p>`;
    s2.classList.add('d-none'); s3.classList.remove('d-none');
  });
  form.addEventListener('submit', (e)=>{
    e.preventDefault();
    const ref = 'TRV-'+Math.random().toString(36).slice(2,9).toUpperCase();
    document.getElementById('booking-ref').textContent = 'Reference: ' + ref;
    conf.classList.remove('d-none');
    localStorage.removeItem('prefillDestination');
  });

  if(window.prefillBooking) window.prefillBooking();
});
</script>
</body>
</html>